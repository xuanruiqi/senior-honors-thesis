\documentclass[12pt]{report}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{listings}
\usepackage{textcomp}
\PassOptionsToPackage{hyphens}{url}
\usepackage[breaklinks=true, naturalnames=true]{hyperref}
\usepackage{graphicx}
\usepackage{natbib}
\usepackage{color}
\usepackage{epigraph}
\usepackage[nottoc]{tocbibind}
\usepackage{amsthm}
\usepackage[ruled,vlined]{algorithm2e}
\usepackage{float}
\usepackage{tikz}
\usetikzlibrary{shapes.multipart, positioning, fit}

\hypersetup{colorlinks,citecolor=magenta,linkcolor=blue,urlcolor=blue}

\interfootnotelinepenalty=10000

%% \setlength\epitextskip{2ex}
\setlength\epigraphwidth{.8\textwidth}
\setlength\epigraphrule{0pt}

\newcommand{\namesigdate}[2][5cm]{%
  \begin{tabular}{@{}p{#1}@{}}
    #2 \\[2\normalbaselineskip] \hrule \\[0pt]
    {\small \textit{Signature}} \\[2\normalbaselineskip] \hrule \\[0pt]
    {\small \textit{Date}}
  \end{tabular}
}

\lstset{
  frameround=fttt,
  numbers=left,
  breaklines=true,
  keywordstyle=\ttfamily\color{blue}\bfseries, 
  basicstyle=\ttfamily\color{black}\bfseries,
  numberstyle=\ttfamily\color{black}\bfseries
}

\theoremstyle{definition}
\newtheorem{definition}{Definition}[section]

\lstloadlanguages{Haskell}
\lstnewenvironment{code}
                  {\lstset{}%
                    \csname lst@SetFirstLabel\endcsname}
                  {\csname lst@SaveFirstLabel\endcsname}
                  \lstset{
                    basicstyle=\small\ttfamily,
                    flexiblecolumns=false,
                    basewidth={0.5em,0.45em},
                    literate={+}{{$+$}}1 {/}{{$/$}}1 {*}{{$*$}}1 {=}{{$=$}}1
                    {>}{{$>$}}1 {<}{{$<$}}1
                    {\\\\}{{\char`\\\char`\\}}1
                    {->}{{$\rightarrow$}}2 {>=}{{$\geq$}}2 {<-}{{$\leftarrow$}}2
                    {<=}{{$\leq$}}2 {=>}{{$\Rightarrow$}}2 
                    {\ .}{{$\circ$}}2 {\ .\ }{{$\circ$}}2
                    {>>}{{>>}}2 {>>=}{{>>=}}2
                    {|}{{$\mid$}}1               
                  }
                  
                  \renewcommand{\lstlistingname}{Code snippet}
    
\begin{document}
    
    
\begin{titlepage}
\begin{center}        
\LARGE
\textbf{Elephant Tracks II: Practical, Extensible Memory Tracing}
        
\vspace{0.5in}
\large
by
\vspace{0.5in}

\Large
Xuanrui (Ray) Qi

\vspace{0.25in}

\normalsize
B.S.C.S., Tufts University, 2018

\vspace{1in}

\normalsize
A senior honors thesis\\~\\
submitted to\\~\\
the Department of Computer Science\\
School of Engineering\\
Tufts University\\
Medford, Massachusetts\\~\\
May 3, 2018

\vspace{0.75in}

\normalsize
\textbf{Thesis Committee:}\\
Professor Samuel Z. Guyer, Chair\\
Professor Kathleen Fisher
        
\end{center}
\end{titlepage}

\newpage
\vspace*{\fill}
\noindent
ELEPHANT TRACKS II: PRACTICAL, EXTENSIBLE MEMORY TRACING\\~\\\\~\\
Copyright by Xuanrui (Ray) Qi, 2018\\~\\\\~\\
This thesis is licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License.\\
For a copy of the license, please visit: ~\url{https://creativecommons.org/licenses/by/4.0/legalcode}.\\~\\\\~\\
This thesis is typeset using \LaTeX.
\vspace*{\fill}
\thispagestyle{empty}

\newpage
\section*{\centering Abstract}
\input{abstract.tex}
\thispagestyle{empty}

\newpage
\section*{\centering Acknowledgements}
\input{acknowledgements.tex}

\setcounter{tocdepth}{0}
{\hypersetup{linkcolor=black}
 \tableofcontents
}
\thispagestyle{empty}

\setcounter{page}{0}
\chapter{Introduction}
\input{intro.tex}

\chapter{Preliminaries and Previous Work}
\label{chap:prelim}
\input{preliminaries.tex}

\chapter{Architecture}
\label{chap:arch}
\input{architecture.tex}

\chapter{Algorithms and Implementation}
\label{chap:algoimp}
\input{implementation.tex}

\chapter{Extensibility}
\label{chap:extensible}
\input{extensible.tex}

\chapter{Related and Future Work}
\label{chap:conclusion}
\input{futurework.tex}

\chapter{Conclusion}
\label{chap:realconclusion}
\input{conclusion.tex}

\chapter*{Appendix: Overview of Code Repositories}
\addcontentsline{toc}{chapter}{Appendix: Overview of Code Repositories}
\label{appendix:a}
\input{appendixa.tex}

\bibliographystyle{acmref}
\bibliography{thesis}
\end{document}
